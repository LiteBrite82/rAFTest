<!DOCTYPE html>
<html>
  <head>
    <title>rAF Apps</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="index.css"/>
  </head>
  <body style="display:flex; flex-direction:column; align-items:center;">
<!--<h1><object data="/raf/rAFoffset.svg" type="image/svg+xml" style="width:180px; height:180px; border:none;"></object>Apps</h1>-->
    <div style="display:flex; flex-direction:column; width:33%;">
      <div style="display:flex; align-items:center;">
        <object data="/raf/img/rAFoffset.svg" type="image/svg+xml" style="width:180px; height:180px;"></object>
        <h1>Apps</h1>
      </div>
      <p>These apps were initially conceived for testing the library; then as a way to demonstrate the library; then as a way to generate JavaScript animation code to help fill in for the lack of formal documentation. They all contain Copy Data buttons that copy tabular animation data to the clipboard for validation and analysis. To the immediate right is the Copy Code button, which generates JavaScript code for the currently configured animation and copies it.</p>
      <p><span class="rAF">rAF</span> offers a wide variety of interdependent features. Some properties are arrays of user-defined length. Fitting all that into a suite of apps, much less a single app, is not necessarily desirable. It's certainly a monster to code and probably a monster to use. The apps, Easings in particular, limit the available values for some properties in order to make the interface simpler while still meeting testing requirements. The auto-generated JavaScript code is meant as a starting point, not a finished animation. You have to supply your own HTMLElement, SVGElement, or CSSStyleRule regardless. It's should be simple to alter the property values generated by the app and adapt the code to your web page.</p>
      <p><span class="rAF">rAF</span> uses <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_properties">private properties</a>, which are not supported by some older versions of browsers. If your browser is not up to date, or if you're using an older device/OS, see <a href="https://caniuse.com/?search=private%20class">caniuse.com</a> for which browser versions offer support (currently 93.07% global support). If the app page doesn't display, this is probably the issue. You might check the Developer Tools console to see if there is any info there.</p>
      <p>Note that the apps use seconds for the time units. <span class="rAF">rAF</span> uses milliseconds.</p>

      <h2>There are three apps available:</h2>
      <p class="bullet">&#x25CF;&ensp;<a class="bullet" href="/raf/apps/easings">Easings </a>
        <span class="bullet">are animation timing functions that you can chain.</span>
      </p>
      <p class="bullet">&#x25CF;&ensp;<a class="bullet" href="/raf/apps/multi">Multi-Ease </a>
        <span class="bullet">is multiple easings applied to a single property.</span>
      </p>
      <p class="bullet">&#x25CF;&ensp;<a class="bullet" href="/raf/apps/color">Color </a>
        <span class="bullet">applies easings and multi-eases to CSS and Color.js colors.</span>
      </p>

      <h2 id="easings">Easings</h2>
      <img src="/raf/img/easings.jpg" class="scale"/>
      <p>The Easings app is not designed for mobile phones. At or below 675px wide by 749px tall it reduces its size to 75% and bottoms out there.</p>
      <p>This app allows you to design one or two-legged timing patterns in a CSS-like model, with flexible ease-in and ease-out settings. <span class="rAF">rAF</span> allows for unlimited legs, but fitting that in an app is awkward. For user convenience, <span class="rAF">rAF</span> also has settings that mimic this same CSS-like model, and this tests most of those features.</p>
      <p>Timing functions include standard CSS and JQuery functions, with several enhancements. Steps functions are significantly enhanced, with the ability to apply a non-steps easing function to the steps values, timing, or both.  Instead of the JQuery model of separate functions for exponents 2-5, <span class="rAF">rAF</span> lets you specify any number that the <span>Math.pow()</span> function accepts. And more...</p>
      <p>The chart is a 1000 x 1000 SVG canvas, with extra vertical headroom for out of range values &lt;0 and &gt;1000. You'll note that the Start and End fields generally display either 0 or 1000, reflecting the Y axis in the chart, the animated value. The X axis is time, so the numeric display is in seconds, not chart units.</p>
      <p style="font-style:italic">What follows is in the terminology of <span class="rAF">rAF</span>, which is not the same as the labels in the app, but they are similar enough and it's organized around the app's layout.</p>
      <p>There are 4 Round Trip properties:
        <br>&emsp;3 booleans: <span>roundTrip flipTrip autoTrip</span>
        <br>&emsp;1 number: <span>tripWait</span>
      </p>
      <p><span>roundTrip</span> turns the feature on or off and enables or disables the other 3 properties.</p>
      <p><span>flipTrip</span> defaults to <span>true</span>: the return aka inbound trip follows the same line as the outbound trip. Setting flipTrip to <span>false</span> causes the inbound trip's line to mirror the outbound trip. Give it a try with any <span>type</span> other than <span>linear</span>, and the chart will illustrate it clearly. It makes no difference for linear.</p>
      <p><span>autoTrip</span> also defaults to <span>true</span>: the animation automatically executes the inbound trip after the outbound trip ends.  The more unusual setting is <span>false</span>, where the animation stops at the end of the outbound trip, but stays in that state so the user can initiate the return trip. You cannot combine <span>autoTrip</span> = <span>false</span> with <span>plays</span> = greater than 1.</p>
      <p><span>tripWait</span> is the number of milliseconds to wait between the end of the outbound trip and the start of the inbound trip.  It affects <span>autoTrip</span> = <span>false</span> too, acting the same as the <span>Easy.prototype.wait</span> property does for the outbound trip. (The <span>wait</span> property is not included in this app as there are already too many inputs and it's easily tested.)</p>
      <p><span>plays</span> is the number of times the animation plays. It is an integer, minimum of 1. The app limits it to a max of 3.</p>
      <p><span>plays</span> and <span>loopByElm</span> share a drop-down and a property: <span>loopWait</span> is the number milliseconds between plays or loops by element. The app limits it via the drop-down options.</p>
      <p><span>loopByElm</span> is a boolean that causes the animation to loop one element at a time.</p>
      <p><span>frameZero</span> is in the app for testing only. It's a fine detail of a setting that I'm not going to explain here now. If you're really curious look at the code in <span>aframe.js</span>, which has some explanatory comments.</p>
      <p><span>useNow</span> uses <span>performance.now()</span> instead of the <span>requestAnimationFrame()</span> timestamps and <span>document.timeline.currentTime</span>.</p>
      <p><span>mid</span>, <span>split</span>, <span>gap</span> are for two-legged easings only. They are shorthands for individual leg properties.</p>
      <p><span>mid</span> is the animation value at which the legs change. Defaults to 50% of the distance, in this case 500.</p>
      <p><span>split</span> is the animation time at which the legs change. Defaults to 50%.</p>
      <p><span>gap</span> is the number of milliseconds to wait between the end of the first leg and the start of the second. Defaults to zero.</p>
      <p><span class="bullet" style="font-weight:500;">Draw line as steps</span> is not an <span class="rAF">rAF</span> feature. It is an app feature that draws the chart's line as one step per frame. It's especially useful for viewing multiple frames with a static value, as with <span>gap</span>.</p>

      <h2 id="multi">Multi-Ease</h2>
      <img src="/raf/img/multi.jpg"/>
      <p>The Multi-Ease app is designed to be used on recent mobile devices as well as desktops. Baseline size is ....</p>
      <p>This app allows you to configure animations where you choose a separate timing pattern for each argument in a CSS property or function. It is fixed at 3 timing patterns, which is enough to test, demonstrate, and create starting point code. It animates the CSS <span>clip-path</span> property using the <span>polygon()</span> function. The shape is filled with a diagonal gradient to prove that it's one shape. Multi-eases can apply to properties/functions that have multiple arguments, or to "unstructured" properties/functions such as gradients and shapes.</p>

      <h2 id="color">Color</h2>
      <img src="/raf/img/color.jpg"/>
      <p>The Color app is designed to be used on recent mobile devices as well as desktops. Baseline size is ....</p>
      <p>This app allows you to configure and view color animations using CSS and <a href="https://colorjs.io">Color.js</a> color spaces. You can assign any preset or user easing or multi-ease to the animation. It offers a side-by-side comparison mode where you can compare the same animation across two color spaces. You must turn Compare off to access the Copy buttons, which are for a single color. With Compare off you can also highlight out-of-gamut values.</p>

      <h2 id="common-features">Common Features</h2>
      <p>All the apps have tooltips for most of the controls. They are enabled by hovering the mouse pointer over the control. If you only have a touch interface then you'd be out of luck were it not for this bit of documentation. The tooltips are implemented in the standard way, as <span>title</span> attribute values.</p>
      <img src="/raf/img/playback.jpg" class="sub"/>
      <p>The playback and time navigation controls are quite standard. Two playback buttons that default to Play and Stop. They change icons during playback to Pause/Resume and Reset. The slider aka range control navigates time when playback is idle. During playback it animates, but is disabled for user control. The slider is rendered differently by each browser and I have not gone the extra mile to style it with the browser-specific CSS tags/properties. The images above are all from Chrome.</p>
      <img src="/raf/img/named+copy.jpg" class="sub"/>
      <p>All the apps have one or more drop-down lists for selecting a named easing or multi. In the Easings and Multi apps the primary one is labeled Name. For steps, Easings has two more such drop-downs, one for Timing, the other for Values. Multi has three of them labeled Easy.  In the Color app they are labeled Easy and Multi.</p>
      <p>These drop-downs contain presets supplied by the app. In Easings and Multi you can add user-defined configurations as well. Those are saved to <span>localStorage</span>. They are all available for selection in Color, but Color does not have a Save button.</p>
      <p>In Easings and Multi, there are 4 buttons that accompany the primary dropdown: Save, Revert to last saved, Revert to preset value, Delete user configuration (can't delete presets).</p>
      <p>There are two Copy buttons: Data and Code. Copy Data copies the currently displayed animation or pseudo-animation's data, by frame, to the clipboard. The clipboard data includes one row of text headers. The first column is always time. After that it varies by app. I use this feature to validate timing functions in a spreadsheet. I paste the data in and spread forumulas around to validate the numbers.</p>
      <p>Copy Code generates starting point code for implementing the current animation, and copies it to the clipboard. I hope this helps users get started using and learning <span class="rAF">rAF</span>. Custom examples is a nice way to get started, at least that's my hope.</p>

      <p>If you're curious as to how <span class="rAF">rAF</span> estimates the device/browser frame rate, open the Developer Tools console.  The apps log the frame timing data and summaries that  <span>AFrame.prototype.fpsBaseline()</span> uses to calculate it. The JavaScript code that runs the baseline calculation is in <span>/apps/load.js/loadFinally()</span>. I say "device/browser" frame rate because some devices don't make all their frame rates available to the browser.  My current Android phone does that.</p>

    </div>
  </body>
</html>